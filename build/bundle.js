var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,n,o,s){return t[1]&&s?e(o.ctx.slice(),t[1](s(n))):o.ctx}function i(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function f(){return p("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){(null!=e||t.value)&&(t.value=e)}function b(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function k(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function y(t,e,n){t.classList[n?"add":"remove"](e)}let x;function _(t){x=t}function I(){if(!x)throw new Error("Function called outside component initialization");return x}function C(){const t=I();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,s)})}}}function E(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const z=[],j=[],S=[],D=[],P=Promise.resolve();let T=!1;function M(t){S.push(t)}function F(){const t=new Set;do{for(;z.length;){const t=z.shift();_(t),N(t.$$)}for(;j.length;)j.pop()();for(let e=0;e<S.length;e+=1){const n=S[e];t.has(n)||(n(),t.add(n))}S.length=0}while(z.length);for(;D.length;)D.pop()();T=!1}function N(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const B=new Set;let q;function L(){q={r:0,c:[],p:q}}function V(){q.r||s(q.c),q=q.p}function A(t,e){t&&t.i&&(B.delete(t),t.i(e))}function O(t,e,n,o){if(t&&t.o){if(B.has(t))return;B.add(t),q.c.push(()=>{B.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function U(t,e){const n=e.token={};function o(t,o,s,r){if(e.token!==n)return;e.resolved=r;let c=e.ctx;void 0!==s&&(c=c.slice(),c[s]=r);const l=t&&(e.current=t)(c);let i=!1;e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==o&&t&&(L(),O(t,1,1,()=>{e.blocks[n]=null}),V())}):e.block.d(1),l.c(),A(l,1),l.m(e.mount(),e.anchor),i=!0),e.block=l,e.blocks&&(e.blocks[o]=l),i&&F()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=I();if(t.then(t=>{_(n),o(e.then,1,e.value,t),_(null)},t=>{_(n),o(e.catch,2,e.error,t),_(null)}),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var s}function W(t,e){O(t,1,1,()=>{e.delete(t.key)})}function G(t,e,n,o,s,r,c,l,i,a,u,d){let p=t.length,m=r.length,f=p;const g={};for(;f--;)g[t[f].key]=f;const $=[],h=new Map,v=new Map;for(f=m;f--;){const t=d(s,r,f),l=n(t);let i=c.get(l);i?o&&i.p(t,e):(i=a(l,t),i.c()),h.set(l,$[f]=i),l in g&&v.set(l,Math.abs(f-g[l]))}const w=new Set,b=new Set;function k(t){A(t,1),t.m(l,u),c.set(t.key,t),u=t.first,m--}for(;p&&m;){const e=$[m-1],n=t[p-1],o=e.key,s=n.key;e===n?(u=e.first,p--,m--):h.has(s)?!c.has(o)||w.has(o)?k(e):b.has(s)?p--:v.get(o)>v.get(s)?(b.add(o),k(e)):(w.add(s),p--):(i(n,c),p--)}for(;p--;){const e=t[p];h.has(e.key)||i(e,c)}for(;m;)k($[m-1]);return $}function H(t){t&&t.c()}function K(t,e,o){const{fragment:c,on_mount:l,on_destroy:i,after_update:a}=t.$$;c&&c.m(e,o),M(()=>{const e=l.map(n).filter(r);i?i.push(...e):s(e),t.$$.on_mount=[]}),a.forEach(M)}function R(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(z.push(t),T||(T=!0,P.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,n,r,c,l,i,a=[-1]){const u=x;_(e);const d=n.props||{},p=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:a};let m=!1;p.ctx=r?r(e,d,(t,n,o=n)=>(p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(p.bound[t]&&p.bound[t](o),m&&J(e,t)),n)):[],p.update(),m=!0,s(p.before_update),p.fragment=!!c&&c(p.ctx),n.target&&(n.hydrate?p.fragment&&p.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):p.fragment&&p.fragment.c(),n.intro&&A(e.$$.fragment),K(e,n.target,n.anchor),F()),_(u)}class Q{$destroy(){R(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const Y=t=>(...e)=>new Promise(n=>t.apply(null,[...e,n])),Z=(t,e)=>{window.dispatchEvent(new CustomEvent("notification",{detail:{message:t,type:e}}))},tt=async(t,e=70)=>{let n=[];try{const o=Y(window.FB.api);for(;n.length<e&&t;){const e=await o(t);if(e.error)throw new Error(e.error.error_user_msg);n=n.concat(e.data),t=(e.paging||{}).next}}catch(t){Z(t.message,"error")}return n},et=async(t,e,n,o)=>{let s=[];n=new Date(n).getTime(),o=new Date(o).getTime();try{const r=Y(window.FB.api);let c;for(;;){const l=`/${t}?fields=business_discovery.username(${e})`+`{media${c?`.after(${c})`:""}{media_url,like_count,comments_count,timestamp,caption,media_type,permalink,username}}`,i=await r(l);if(i.error)throw new Error(i.error.error_user_msg);const{data:a,paging:u}=i.business_discovery.media;if(s=s.concat(a.filter(t=>{let e=new Date(t.timestamp).getTime();return e>=n&&e<=o})),c=u&&u.cursors.after,!c||new Date(a[a.length-1].timestamp).getTime()<n)break}0===s.length&&Z("No posts found for given profile and dates")}catch(t){Z(t.message,"error")}return s},nt=(t,e,n)=>fetch(t,{method:"post",headers:{"Content-Type":"application/json",Authorization:n?`Bearer ${n}`:""},body:JSON.stringify(e)}).then(t=>t.json()),ot=async({site:t,username:e,password:n,content:o,title:s})=>{try{const{message:r,token:c}=await nt(`${t}/wp-json/jwt-auth/v1/token`,{username:e,password:n});if(r)throw new Error(r);let l;if(~~s==s){const{message:e,content:n}=await fetch(`${t}/wp-json/wp/v2/posts/${s}?context=edit`,{headers:{Authorization:`Bearer ${c}`}}).then(t=>t.json());if(e)throw new Error(e);o=n.raw+"\n"+o,l=nt(`${t}/wp-json/wp/v2/posts/${s}`,{content:o},c)}else l=nt(`${t}/wp-json/wp/v2/posts/`,{title:s,content:o},c);const{message:i,id:a}=await l;if(i)throw new Error(i);return Z("Successfully saved on Wordpress","success"),a}catch(t){Z(t.message,"error")}},st=t=>t.map(t=>{return`\n\t\t\t<div>\n\t\t\t\t${"VIDEO"===t.media_type?`<video src=${t.media_url} preload="metadata" width="450" controls>Instagram Video</video>`:`<img src=${t.media_url} alt="Instagram Image" width="450" />`}\n\t\t\t\t<p>\n\t\t\t\t\t<a href="https://www.instagram.com/${t.username}">@${t.username}</a> ${t.caption}\n\t\t\t\t\t[<a href="${t.permalink}" target="_blank">View Original</a>]\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t`}).join("");function rt(t){let e,n,o,s,r,c,p;const f=t[5].default,g=function(t,e,n,o){if(t){const s=l(t,e,n,o);return t[0](s)}}(f,t,t[4],null);return{c(){e=d("div"),n=d("div"),o=d("span"),r=m(),c=d("div"),g&&g.c(),h(o,"class",s="icofont-"+t[2]+" svelte-1t71p9k"),h(n,"class","icon svelte-1t71p9k"),h(c,"class","icon-text svelte-1t71p9k"),h(e,"class","icon-wrapper svelte-1t71p9k"),b(e,"--size",t[0]),b(e,"--color",t[1]),y(e,"hover",t[3])},m(t,s){a(t,e,s),i(e,n),i(n,o),i(e,r),i(e,c),g&&g.m(c,null),p=!0},p(t,n){(!p||4&n&&s!==(s="icofont-"+t[2]+" svelte-1t71p9k"))&&h(o,"class",s),g&&g.p&&16&n&&g.p(l(f,t,t[4],null),function(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if("object"==typeof e.dirty){const t=[],n=Math.max(e.dirty.length,s.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|s[o];return t}return e.dirty|s}return e.dirty}(f,t[4],n,null)),(!p||1&n)&&b(e,"--size",t[0]),(!p||2&n)&&b(e,"--color",t[1]),8&n&&y(e,"hover",t[3])},i(t){p||(A(g,t),p=!0)},o(t){O(g,t),p=!1},d(t){t&&u(e),g&&g.d(t)}}}function ct(t){let e,n,o=t[2]&&rt(t);return{c(){o&&o.c(),e=f()},m(t,s){o&&o.m(t,s),a(t,e,s),n=!0},p(t,[n]){t[2]?o?(o.p(t,n),A(o,1)):(o=rt(t),o.c(),A(o,1),o.m(e.parentNode,e)):o&&(L(),O(o,1,1,()=>{o=null}),V())},i(t){n||(A(o),n=!0)},o(t){O(o),n=!1},d(t){o&&o.d(t),t&&u(e)}}}function lt(t,e,n){let{size:o="1.2rem"}=e,{color:s="black"}=e,{icon:r}=e,{hover:c=!1}=e,{$$slots:l={},$$scope:i}=e;return t.$set=t=>{"size"in t&&n(0,o=t.size),"color"in t&&n(1,s=t.color),"icon"in t&&n(2,r=t.icon),"hover"in t&&n(3,c=t.hover),"$$scope"in t&&n(4,i=t.$$scope)},[o,s,r,c,i,l]}class it extends Q{constructor(t){super(),X(this,t,lt,ct,c,{size:0,color:1,icon:2,hover:3})}}function at(t){let e,n,o=t[0]?"out":"in";return{c(){e=p("Log"),n=p(o)},m(t,o){a(t,e,o),a(t,n,o)},p(t,e){1&e&&o!==(o=t[0]?"out":"in")&&v(n,o)},d(t){t&&u(e),t&&u(n)}}}function ut(t){let e,n,o,s,r,c,l;const p=new it({props:{size:"1.5rem",color:t[0]?"#900":"#093",icon:"power",hover:!0,$$slots:{default:[at]},$$scope:{ctx:t}}});return{c(){e=d("header"),n=d("div"),n.innerHTML="<span>InstaXplore</span>",o=m(),s=d("div"),r=d("button"),H(p.$$.fragment),h(n,"class","brand svelte-8uj5zu"),h(r,"class","svelte-8uj5zu"),h(e,"class","svelte-8uj5zu"),l=g(r,"click",t[1])},m(t,l){a(t,e,l),i(e,n),i(e,o),i(e,s),i(s,r),K(p,r,null),c=!0},p(t,[e]){const n={};1&e&&(n.color=t[0]?"#900":"#093"),5&e&&(n.$$scope={dirty:e,ctx:t}),p.$set(n)},i(t){c||(A(p.$$.fragment,t),c=!0)},o(t){O(p.$$.fragment,t),c=!1},d(t){t&&u(e),R(p),l()}}}function dt(t,e,n){let{loggedIn:o}=e;return t.$set=t=>{"loggedIn"in t&&n(0,o=t.loggedIn)},[o,()=>o?window.FB.logout():window.FB.login(()=>{},{scope:"manage_pages,instagram_basic,instagram_manage_insights",auth_type:"rerequest"})]}class pt extends Q{constructor(t){super(),X(this,t,dt,ut,c,{loggedIn:0})}}function mt(e){let n;return{c(){n=d("div"),b(n,"width",e[1]),b(n,"height",e[2]),b(n,"background",e[0])},m(t,e){a(t,n,e)},p(t,[e]){1&e&&b(n,"background",t[0])},i:t,o:t,d(t){t&&u(n)}}}function ft(t,e,n){let{vertical:o=!0}=e,{size:s=".2rem"}=e,{background:r="#eee"}=e,c=o?s:"100%",l=o?"100%":s;return t.$set=t=>{"vertical"in t&&n(3,o=t.vertical),"size"in t&&n(4,s=t.size),"background"in t&&n(0,r=t.background)},[r,c,l,o,s]}class gt extends Q{constructor(t){super(),X(this,t,ft,mt,c,{vertical:3,size:4,background:0})}}function $t(e){let n,o,s;return{c(){n=d("div"),o=d("span"),s=p(e[0]),h(n,"class","waiter svelte-1q1gv10")},m(t,e){a(t,n,e),i(n,o),i(o,s)},p(t,[e]){1&e&&v(s,t[0])},i:t,o:t,d(t){t&&u(n)}}}function ht(t,e,n){let{text:o="Please wait..."}=e;return t.$set=t=>{"text"in t&&n(0,o=t.text)},[o]}class vt extends Q{constructor(t){super(),X(this,t,ht,$t,c,{text:0})}}function wt(e){let n,o,r,c,l,f,v,b,k,y,x,_,I;return{c(){n=d("form"),o=d("input"),r=m(),c=d("label"),l=p("Since "),f=d("input"),v=m(),b=d("label"),k=p("Until "),y=d("input"),x=m(),_=d("button"),_.textContent="GET",h(o,"type","text"),h(o,"placeholder","Instagram Username / Profile Link"),o.required=!0,h(f,"type","date"),h(f,"max",e[5]),f.required=!0,h(c,"class","svelte-pedw3o"),h(y,"type","date"),h(y,"max",e[6]),y.required=!0,h(b,"class","svelte-pedw3o"),h(n,"class","svelte-pedw3o"),I=[g(o,"input",e[12]),g(o,"change",e[8]),g(f,"input",e[14]),g(f,"input",e[7]),g(y,"input",e[16]),g(y,"input",e[7]),g(n,"submit",$(e[9]))]},m(t,s){a(t,n,s),i(n,o),w(o,e[0]),i(n,r),i(n,c),i(c,l),i(c,f),e[13](f),w(f,e[1]),i(n,v),i(n,b),i(b,k),i(b,y),e[15](y),w(y,e[2]),i(n,x),i(n,_)},p(t,[e]){1&e&&o.value!==t[0]&&w(o,t[0]),2&e&&w(f,t[1]),4&e&&w(y,t[2])},i:t,o:t,d(t){t&&u(n),e[13](null),e[15](null),s(I)}}}function bt(t,e,n){const o=C(),s=t=>t.toISOString().split("T")[0],r=s(new Date),c=s(new Date(Date.now()+864e5));let l,i,a,u=r,d=c;return[l,u,d,i,a,r,c,t=>{[i,a].forEach(t=>t.setCustomValidity(new Date(u).getTime()>=new Date(d).getTime()?"Since date must be less than until date":""))},t=>{try{const e=new URL(l);"www.instagram.com"===e.hostname?(n(0,l=e.pathname.split("/")[1]),t.target.setCustomValidity("")):t.target.setCustomValidity("Invalid Instagram profile link")}catch(e){t.target.setCustomValidity("")}},t=>{o("search",{profile:l,since:u,until:d})},o,s,function(){l=this.value,n(0,l)},function(t){j[t?"unshift":"push"](()=>{n(3,i=t)})},function(){u=this.value,n(1,u)},function(t){j[t?"unshift":"push"](()=>{n(4,a=t)})},function(){d=this.value,n(2,d)}]}class kt extends Q{constructor(t){super(),X(this,t,bt,wt,c,{})}}function yt(t){let e,n;return{c(){e=d("img"),e.src!==(n=t[0].media_url)&&h(e,"src",n),h(e,"alt","Instagram Image"),h(e,"class","svelte-18rdtv2")},m(t,n){a(t,e,n)},p(t,o){1&o&&e.src!==(n=t[0].media_url)&&h(e,"src",n)},d(t){t&&u(e)}}}function xt(t){let e,n,o;return{c(){e=d("video"),n=p("Instagram Video"),e.src!==(o=t[0].media_url)&&h(e,"src",o),h(e,"preload","metadata"),e.controls=!0,h(e,"class","svelte-18rdtv2")},m(t,o){a(t,e,o),i(e,n)},p(t,n){1&n&&e.src!==(o=t[0].media_url)&&h(e,"src",o)},d(t){t&&u(e)}}}function _t(e){let n;return{c(){n=p(e[1])},m(t,e){a(t,n,e)},p:t,d(t){t&&u(n)}}}function It(e){let n;return{c(){n=p(e[2])},m(t,e){a(t,n,e)},p:t,d(t){t&&u(n)}}}function Ct(t){let e,n,o,s,r,c,l,f,$,w,b,k,y,x,_,I,C,E,z,j=t[0].caption+"",S=new Date(t[0].timestamp).toUTCString()+"";function D(t,e){return"VIDEO"===t[0].media_type?xt:yt}let P=D(t),T=P(t);const M=new it({props:{color:"red",icon:"heart",$$slots:{default:[_t]},$$scope:{ctx:t}}}),F=new it({props:{color:"grey",icon:"speech-comments",$$slots:{default:[It]},$$scope:{ctx:t}}});return{c(){e=d("div"),n=d("div"),T.c(),o=m(),s=d("div"),r=d("div"),c=d("div"),l=p(j),f=m(),$=d("div"),w=p(S),b=m(),k=d("div"),y=d("div"),H(M.$$.fragment),x=m(),H(F.$$.fragment),_=m(),I=d("div"),C=d("button"),C.textContent="Add",h(n,"class","media-wrapper svelte-18rdtv2"),h($,"class","timestamp svelte-18rdtv2"),h(y,"class","stats"),h(k,"class","flex justify-content-between"),h(s,"class","details-wrapper svelte-18rdtv2"),h(e,"class","post-detail svelte-18rdtv2"),z=g(C,"click",t[3])},m(t,u){a(t,e,u),i(e,n),T.m(n,null),i(e,o),i(e,s),i(s,r),i(r,c),i(c,l),i(r,f),i(r,$),i($,w),i(s,b),i(s,k),i(k,y),K(M,y,null),i(y,x),K(F,y,null),i(k,_),i(k,I),i(I,C),E=!0},p(t,[e]){P===(P=D(t))&&T?T.p(t,e):(T.d(1),T=P(t),T&&(T.c(),T.m(n,null))),(!E||1&e)&&j!==(j=t[0].caption+"")&&v(l,j),(!E||1&e)&&S!==(S=new Date(t[0].timestamp).toUTCString()+"")&&v(w,S);const o={};64&e&&(o.$$scope={dirty:e,ctx:t}),M.$set(o);const s={};64&e&&(s.$$scope={dirty:e,ctx:t}),F.$set(s)},i(t){E||(A(M.$$.fragment,t),A(F.$$.fragment,t),E=!0)},o(t){O(M.$$.fragment,t),O(F.$$.fragment,t),E=!1},d(t){t&&u(e),T.d(),R(M),R(F),z()}}}function Et(t,e,n){let{post:o}=e;const s=C(),r=t=>t<1e3?t.toString():t<1e6?(t/1e3).toFixed(2).replace(/\.?0+$/,"")+" K":(t/1e6).toFixed(2).replace(/\.?0+$/,"")+" M";let c=r(o.like_count),l=r(o.comments_count);return t.$set=t=>{"post"in t&&n(0,o=t.post)},[o,c,l,t=>{t.target.innerText="Add again",s("add",{post:Object.assign({},o,{id:`${o.id}_${Math.random().toString(36).substring(7)}`})})}]}class zt extends Q{constructor(t){super(),X(this,t,Et,Ct,c,{post:0})}}function jt(t,e,n){const o=t.slice();return o[9]=e[n],o}function St(e){return{c:t,m:t,i:t,o:t,d:t}}function Dt(e){return{c:t,m:t,i:t,o:t,d:t}}function Pt(t){let e;const n=new vt({});return{c(){H(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){O(n.$$.fragment,t),e=!1},d(t){R(n,t)}}}function Tt(t){let e,n,o,r,c,l,m,f;return{c(){e=d("div"),n=d("label"),o=p("Sort:\n\t\t\t\t"),r=d("select"),c=d("option"),c.textContent="Newest",l=d("option"),l.textContent="Most Liked",m=d("option"),m.textContent="Most Commented",c.__value="timestamp",c.value=c.__value,l.__value="like_count",l.value=l.__value,m.__value="comments_count",m.value=m.__value,void 0===t[1]&&M(()=>t[7].call(r)),h(e,"class","sort-by svelte-bde25l"),f=[g(r,"change",t[7]),g(r,"change",t[3])]},m(s,u){a(s,e,u),i(e,n),i(n,o),i(n,r),i(r,c),i(r,l),i(r,m),k(r,t[1])},p(t,e){2&e&&k(r,t[1])},d(t){t&&u(e),s(f)}}}function Mt(t,e){let n,o;const s=new zt({props:{post:e[9]}});return s.$on("add",e[8]),{key:t,first:null,c(){n=f(),H(s.$$.fragment),this.first=n},m(t,e){a(t,n,e),K(s,t,e),o=!0},p(t,e){const n={};1&e&&(n.post=t[9]),s.$set(n)},i(t){o||(A(s.$$.fragment,t),o=!0)},o(t){O(s.$$.fragment,t),o=!1},d(t){t&&u(n),R(s,t)}}}function Ft(t){let e,n,o,s,r,c,l,p=[],f=new Map,g={ctx:t,current:null,token:null,pending:Pt,then:Dt,catch:St,blocks:[,,,]};U(n=t[0],g);const $=new kt({});$.$on("search",t[2]);let v=t[0].length&&Tt(t),w=t[0];const b=t=>t[9].id;for(let e=0;e<w.length;e+=1){let n=jt(t,w,e),o=b(n);f.set(o,p[e]=Mt(o,n))}return{c(){e=d("section"),g.block.c(),o=m(),H($.$$.fragment),s=m(),v&&v.c(),r=m(),c=d("div");for(let t=0;t<p.length;t+=1)p[t].c();h(c,"class","post-list svelte-bde25l"),h(e,"class","explorer svelte-bde25l")},m(t,n){a(t,e,n),g.block.m(e,g.anchor=null),g.mount=()=>e,g.anchor=o,i(e,o),K($,e,null),i(e,s),v&&v.m(e,null),i(e,r),i(e,c);for(let t=0;t<p.length;t+=1)p[t].m(c,null);l=!0},p(o,[s]){t=o,g.ctx=t,1&s&&n!==(n=t[0])&&U(n,g),t[0].length?v?v.p(t,s):(v=Tt(t),v.c(),v.m(e,r)):v&&(v.d(1),v=null);const l=t[0];L(),p=G(p,s,b,1,t,l,f,c,W,Mt,null,jt),V()},i(t){if(!l){A(g.block),A($.$$.fragment,t);for(let t=0;t<w.length;t+=1)A(p[t]);l=!0}},o(t){for(let t=0;t<3;t+=1){O(g.blocks[t])}O($.$$.fragment,t);for(let t=0;t<p.length;t+=1)O(p[t]);l=!1},d(t){t&&u(e),g.block.d(),g.token=null,g=null,R($),v&&v.d();for(let t=0;t<p.length;t+=1)p[t].d()}}}function Nt(t,e,n){let{instagramId:o}=e,s=C(),r=[],c="timestamp";const l=()=>{n(0,r=r.sort((t,e)=>{const n=t[c],o=e[c];switch(c){case"timestamp":return Date.parse(o)-Date.parse(n);case"like_count":case"comments_count":return o-n;default:return o<n?-1:o===n?0:1}}))};return t.$set=t=>{"instagramId"in t&&n(4,o=t.instagramId)},[r,c,({detail:t})=>{n(0,r=et(o,t.profile,t.since,t.until).then(t=>{n(0,r=t),l()}))},l,o,s,void 0,function(){c=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(1,c)},function(e){E(t,e)}]}class Bt extends Q{constructor(t){super(),X(this,t,Nt,Ft,c,{instagramId:4})}}function qt(t){let e,n;return{c(){e=d("img"),e.src!==(n=t[0].media_url)&&h(e,"src",n),h(e,"alt","Instagram Image"),h(e,"class","svelte-whlkz7")},m(t,n){a(t,e,n)},p(t,o){1&o&&e.src!==(n=t[0].media_url)&&h(e,"src",n)},d(t){t&&u(e)}}}function Lt(t){let e,n,o;return{c(){e=d("video"),n=p("Instagram Video"),e.src!==(o=t[0].media_url)&&h(e,"src",o),h(e,"preload","metadata"),e.controls=!0,h(e,"class","svelte-whlkz7")},m(t,o){a(t,e,o),i(e,n)},p(t,n){1&n&&e.src!==(o=t[0].media_url)&&h(e,"src",o)},d(t){t&&u(e)}}}function Vt(e){let n,o,s,r,c,l,f,$,w,b,k,y,x,_,I,C,E,z,j,S,D=e[0].username+"",P=new Date(e[0].timestamp).toUTCString()+"",T=e[0].caption+"";function M(t,e){return"VIDEO"===t[0].media_type?Lt:qt}let F=M(e),N=F(e);return{c(){n=d("div"),o=d("div"),N.c(),s=m(),r=d("div"),c=d("div"),l=d("div"),f=d("a"),$=p("@"),w=p(D),k=m(),y=d("span"),x=p(P),_=m(),I=d("div"),C=d("button"),C.textContent="Remove",E=m(),z=d("div"),j=p(T),h(o,"class","media-wrapper svelte-whlkz7"),h(f,"href",b="https://www.instagram.com/"+e[0].username),h(f,"class","username svelte-whlkz7"),h(y,"class","timestamp svelte-whlkz7"),h(l,"class","info"),h(I,"class","actions"),h(c,"class","toolbar svelte-whlkz7"),h(z,"class","caption"),h(r,"class","details-wrapper svelte-whlkz7"),h(n,"class","post-detail svelte-whlkz7"),S=g(C,"click",e[2],{once:!0})},m(t,e){a(t,n,e),i(n,o),N.m(o,null),i(n,s),i(n,r),i(r,c),i(c,l),i(l,f),i(f,$),i(f,w),i(l,k),i(l,y),i(y,x),i(c,_),i(c,I),i(I,C),i(r,E),i(r,z),i(z,j)},p(t,[e]){F===(F=M(t))&&N?N.p(t,e):(N.d(1),N=F(t),N&&(N.c(),N.m(o,null))),1&e&&D!==(D=t[0].username+"")&&v(w,D),1&e&&b!==(b="https://www.instagram.com/"+t[0].username)&&h(f,"href",b),1&e&&P!==(P=new Date(t[0].timestamp).toUTCString()+"")&&v(x,P),1&e&&T!==(T=t[0].caption+"")&&v(j,T)},i:t,o:t,d(t){t&&u(n),N.d(),S()}}}function At(t,e,n){let{post:o}=e;const s=C();return t.$set=t=>{"post"in t&&n(0,o=t.post)},[o,s,()=>s("remove",{postId:o.id})]}class Ot extends Q{constructor(t){super(),X(this,t,At,Vt,c,{post:0})}}function Ut(e){return{c:t,m:t,i:t,o:t,d:t}}function Wt(e){return{c:t,m:t,i:t,o:t,d:t}}function Gt(t){let e;const n=new vt({});return{c(){H(n.$$.fragment)},m(t,o){K(n,t,o),e=!0},i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){O(n.$$.fragment,t),e=!1},d(t){R(n,t)}}}function Ht(t){let e,n,o,r,c,l,f,v,b,k,y,x,_,I,C,E,z,j,S,D,P,T,M,F,N,B,q,L,V,A,O;return{c(){e=d("form"),n=d("label"),o=p("Wordpress Site"),r=d("br"),c=m(),l=d("input"),f=m(),v=d("label"),b=p("Title(New Post) / Post ID(Existing Post)"),k=d("br"),y=m(),x=d("input"),_=m(),I=d("label"),C=p("Username"),E=d("br"),z=m(),j=d("input"),S=m(),D=d("label"),P=p("Password"),T=d("br"),M=m(),F=d("input"),N=m(),B=d("label"),q=d("input"),L=p("\n\t\t\tUse Embedded Instagram Posts"),V=m(),A=d("div"),A.innerHTML='<button type="reset" class="svelte-w6fsai">Clear</button> \n\t\t\t<button type="submit" class="svelte-w6fsai">Submit</button>',h(l,"type","url"),l.required=!0,x.required=!0,j.required=!0,h(F,"type","password"),F.required=!0,h(q,"type","checkbox"),h(A,"class","actions svelte-w6fsai"),O=[g(l,"input",t[9]),g(x,"input",t[10]),g(j,"input",t[11]),g(F,"input",t[12]),g(q,"change",t[13]),g(e,"submit",$(t[7]))]},m(s,u){a(s,e,u),i(e,n),i(n,o),i(n,r),i(n,c),i(n,l),w(l,t[0]),i(e,f),i(e,v),i(v,b),i(v,k),i(v,y),i(v,x),w(x,t[1]),i(e,_),i(e,I),i(I,C),i(I,E),i(I,z),i(I,j),w(j,t[2]),i(e,S),i(e,D),i(D,P),i(D,T),i(D,M),i(D,F),w(F,t[3]),i(e,N),i(e,B),i(B,q),q.checked=t[4],i(B,L),i(e,V),i(e,A)},p(t,e){1&e&&w(l,t[0]),2&e&&x.value!==t[1]&&w(x,t[1]),4&e&&j.value!==t[2]&&w(j,t[2]),8&e&&F.value!==t[3]&&w(F,t[3]),16&e&&(q.checked=t[4])},d(t){t&&u(e),s(O)}}}function Kt(t){let e,n,o,s,r,c,l,f;return{c(){e=d("div"),n=d("span"),n.textContent="Wordpress post saved successfully",o=d("br"),s=m(),r=d("a"),c=p("Click here"),f=p(" to edit"),h(n,"class","svelte-w6fsai"),h(r,"href",l=t[0]+"/wp-admin/post.php?post="+t[6]+"&action=edit"),h(r,"target","_blank"),h(e,"class","success-message svelte-w6fsai")},m(t,l){a(t,e,l),i(e,n),i(e,o),i(e,s),i(e,r),i(r,c),i(e,f)},p(t,e){65&e&&l!==(l=t[0]+"/wp-admin/post.php?post="+t[6]+"&action=edit")&&h(r,"href",l)},d(t){t&&u(e)}}}function Rt(t){let e,n,o,s,r={ctx:t,current:null,token:null,pending:Gt,then:Wt,catch:Ut,blocks:[,,,]};function c(t,e){return t[6]?Kt:Ht}U(e=t[5],r);let l=c(t),i=l(t);return{c(){r.block.c(),n=m(),i.c(),o=f()},m(t,e){r.block.m(t,r.anchor=e),r.mount=()=>n.parentNode,r.anchor=n,a(t,n,e),i.m(t,e),a(t,o,e),s=!0},p(n,[s]){t=n,r.ctx=t,32&s&&e!==(e=t[5])&&U(e,r),l===(l=c(t))&&i?i.p(t,s):(i.d(1),i=l(t),i&&(i.c(),i.m(o.parentNode,o)))},i(t){s||(A(r.block),s=!0)},o(t){for(let t=0;t<3;t+=1){O(r.blocks[t])}s=!1},d(t){r.block.d(t),r.token=null,r=null,t&&u(n),i.d(t),t&&u(o)}}}function Jt(t,e,n){let o,s,r,c,l,i,a,{posts:u}=e;return t.$set=t=>{"posts"in t&&n(8,u=t.posts)},[o,s,r,c,l,i,a,()=>{const t=l?u.map(t=>t.permalink).join("\n"):st(u);"/"===o.slice(-1)&&n(0,o=o.slice(0,-1)),confirm("Are you sure you want to save the post?")&&n(5,i=ot({site:o,title:s,username:r,password:c,content:t}).then(t=>n(6,a=t)))},u,function(){o=this.value,n(0,o)},function(){s=this.value,n(1,s)},function(){r=this.value,n(2,r)},function(){c=this.value,n(3,c)},function(){l=this.checked,n(4,l)}]}class Xt extends Q{constructor(t){super(),X(this,t,Jt,Rt,c,{posts:8})}}function Qt(t,e,n){const o=t.slice();return o[5]=e[n],o}function Yt(t,e){let n,o;const s=new Ot({props:{post:e[5]}});return s.$on("remove",e[3]),{key:t,first:null,c(){n=f(),H(s.$$.fragment),this.first=n},m(t,e){a(t,n,e),K(s,t,e),o=!0},p(t,e){const n={};1&e&&(n.post=t[5]),s.$set(n)},i(t){o||(A(s.$$.fragment,t),o=!0)},o(t){O(s.$$.fragment,t),o=!1},d(t){t&&u(n),R(s,t)}}}function Zt(e){let n,o,r,c,l;return{c(){n=d("div"),o=d("button"),o.textContent="Clear",r=m(),c=d("button"),c.textContent="Save on Wordpress",h(o,"class","clear-button svelte-1v3bt4p"),h(c,"class","save-button svelte-1v3bt4p"),h(n,"class","toolbar svelte-1v3bt4p"),l=[g(o,"click",e[4]),g(c,"click",e[2])]},m(t,e){a(t,n,e),i(n,o),i(n,r),i(n,c)},p:t,d(t){t&&u(n),s(l)}}}function te(t){let e,n,o,s,r=[],c=new Map,l=t[0];const p=t=>t[5].id;for(let e=0;e<l.length;e+=1){let n=Qt(t,l,e),o=p(n);c.set(o,r[e]=Yt(o,n))}let f=t[0].length&&Zt(t);return{c(){e=d("div"),n=d("div");for(let t=0;t<r.length;t+=1)r[t].c();o=m(),f&&f.c(),h(n,"class","posts-container svelte-1v3bt4p"),h(e,"class","editor svelte-1v3bt4p")},m(t,c){a(t,e,c),i(e,n);for(let t=0;t<r.length;t+=1)r[t].m(n,null);i(e,o),f&&f.m(e,null),s=!0},p(t,[o]){const s=t[0];L(),r=G(r,o,p,1,t,s,c,n,W,Yt,null,Qt),V(),t[0].length?f?f.p(t,o):(f=Zt(t),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(t){if(!s){for(let t=0;t<l.length;t+=1)A(r[t]);s=!0}},o(t){for(let t=0;t<r.length;t+=1)O(r[t]);s=!1},d(t){t&&u(e);for(let t=0;t<r.length;t+=1)r[t].d();f&&f.d()}}}function ee(t,e,n){let{addedPosts:o}=e,s=C();return t.$set=t=>{"addedPosts"in t&&n(0,o=t.addedPosts)},[o,s,()=>{s("openModal",{modal:{component:Xt,props:{posts:o}}})},function(e){E(t,e)},()=>s("clear")]}class ne extends Q{constructor(t){super(),X(this,t,ee,te,c,{addedPosts:0})}}function oe(t){let n,o,r,c;const l=[t[2].props];var p=t[2].component;function m(t){let n={};for(let t=0;t<l.length;t+=1)n=e(n,l[t]);return{props:n}}if(p){var f=new p(m());f.$on("close",t[8])}return{c(){var e;n=d("div"),o=d("div"),f&&H(f.$$.fragment),h(o,"class","modal-wrapper svelte-1w9d9oe"),h(n,"class","modal svelte-1w9d9oe"),c=[g(o,"click",(e=t[6],function(t){return t.stopPropagation(),e.call(this,t)})),g(n,"click",t[9])]},m(t,e){a(t,n,e),i(n,o),f&&K(f,o,null),r=!0},p(t,e){const n=4&e?function(t,e){const n={},o={},s={$$scope:1};let r=t.length;for(;r--;){const c=t[r],l=e[r];if(l){for(const t in c)t in l||(o[t]=1);for(const t in l)s[t]||(n[t]=l[t],s[t]=1);t[r]=l}else for(const t in c)s[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(l,[(s=t[2].props,"object"==typeof s&&null!==s?s:{})]):{};var s;if(p!==(p=t[2].component)){if(f){L();const t=f;O(t.$$.fragment,1,0,()=>{R(t,1)}),V()}p?((f=new p(m())).$on("close",t[8]),H(f.$$.fragment),A(f.$$.fragment,1),K(f,o,null)):f=null}else p&&f.$set(n)},i(t){r||(f&&A(f.$$.fragment,t),r=!0)},o(t){f&&O(f.$$.fragment,t),r=!1},d(t){t&&u(n),f&&R(f),s(c)}}}function se(t){let e,n,o,s,r;const c=new Bt({props:{instagramId:t[0]}});c.$on("add",t[3]);const l=new gt({}),p=new ne({props:{addedPosts:t[1]}});p.$on("remove",t[4]),p.$on("openModal",t[5]),p.$on("clear",t[7]);let f=t[2]&&oe(t);return{c(){e=d("main"),H(c.$$.fragment),n=m(),H(l.$$.fragment),o=m(),H(p.$$.fragment),s=m(),f&&f.c(),h(e,"class","svelte-1w9d9oe")},m(t,u){a(t,e,u),K(c,e,null),i(e,n),K(l,e,null),i(e,o),K(p,e,null),i(e,s),f&&f.m(e,null),r=!0},p(t,[n]){const o={};1&n&&(o.instagramId=t[0]),c.$set(o);const s={};2&n&&(s.addedPosts=t[1]),p.$set(s),t[2]?f?(f.p(t,n),A(f,1)):(f=oe(t),f.c(),A(f,1),f.m(e,null)):f&&(L(),O(f,1,1,()=>{f=null}),V())},i(t){r||(A(c.$$.fragment,t),A(l.$$.fragment,t),A(p.$$.fragment,t),A(f),r=!0)},o(t){O(c.$$.fragment,t),O(l.$$.fragment,t),O(p.$$.fragment,t),O(f),r=!1},d(t){t&&u(e),R(c),R(l),R(p),f&&f.d()}}}function re(t,e,n){let o,{instagramId:s}=e,r=[];return t.$set=t=>{"instagramId"in t&&n(0,s=t.instagramId)},[s,r,o,({detail:t})=>{n(1,r=[...r,t.post])},({detail:t})=>{n(1,r=r.filter(e=>e.id!==t.postId))},({detail:t})=>{n(2,o=t.modal)},function(e){E(t,e)},()=>n(1,r=[]),()=>n(2,o=null),()=>n(2,o=null)]}class ce extends Q{constructor(t){super(),X(this,t,re,se,c,{instagramId:0})}}function le(t){let e,n,o=t[0].message+"";return{c(){e=d("div"),n=p(o),h(e,"class","notification svelte-1s4srt3"),b(e,"--color",t[1])},m(t,o){a(t,e,o),i(e,n)},p(t,s){1&s&&o!==(o=t[0].message+"")&&v(n,o),2&s&&b(e,"--color",t[1])},d(t){t&&u(e)}}}function ie(e){let n,o=e[0]&&le(e);return{c(){o&&o.c(),n=f()},m(t,e){o&&o.m(t,e),a(t,n,e)},p(t,[e]){t[0]?o?o.p(t,e):(o=le(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&u(n)}}}function ae(t,e,n){let o,s;var r;return r=()=>{window.addEventListener("notification",t=>{n(0,o=t.detail),n(1,s=(()=>{switch(o.type){case"success":return"#0d0";case"error":return"#d00";default:return"#dd0"}})()),setTimeout(()=>{n(0,o=null)},5e3)})},I().$$.on_mount.push(r),[o,s]}class ue extends Q{constructor(t){super(),X(this,t,ae,ie,c,{})}}function de(e){let n;return{c(){n=d("p"),n.textContent="Failed to load Facebook SDK. Try disabling your ad-blocker and reloading the page",h(n,"class","message svelte-3dx771")},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function pe(t){let e,n,o,s,r;const c=new pt({props:{loggedIn:t[1]}}),l=[fe,me],i=[];function d(t,e){return t[1]?0:1}return n=d(t),o=i[n]=l[n](t),{c(){H(c.$$.fragment),e=m(),o.c(),s=f()},m(t,o){K(c,t,o),a(t,e,o),i[n].m(t,o),a(t,s,o),r=!0},p(t,e){const r={};2&e&&(r.loggedIn=t[1]),c.$set(r);let a=n;n=d(t),n===a?i[n].p(t,e):(L(),O(i[a],1,1,()=>{i[a]=null}),V(),o=i[n],o||(o=i[n]=l[n](t),o.c()),A(o,1),o.m(s.parentNode,s))},i(t){r||(A(c.$$.fragment,t),A(o),r=!0)},o(t){O(c.$$.fragment,t),O(o),r=!1},d(t){R(c,t),t&&u(e),i[n].d(t),t&&u(s)}}}function me(e){let n;return{c(){n=d("p"),n.textContent="Please login to proceed",h(n,"class","message svelte-3dx771")},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function fe(t){let e,n,o,s={ctx:t,current:null,token:null,pending:he,then:$e,catch:ge,value:7,blocks:[,,,]};return U(n=t[2](),s),{c(){e=f(),s.block.c()},m(t,n){a(t,e,n),s.block.m(t,s.anchor=n),s.mount=()=>e.parentNode,s.anchor=e,o=!0},p(e,n){{const o=(t=e).slice();o[7]=s.resolved,s.block.p(o,n)}},i(t){o||(A(s.block),o=!0)},o(t){for(let t=0;t<3;t+=1){O(s.blocks[t])}o=!1},d(t){t&&u(e),s.block.d(t),s.token=null,s=null}}}function ge(e){let n;return{c(){n=d("p"),n.textContent="Couldn't find any Instagram business account linked Facebook page",h(n,"class","message svelte-3dx771")},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function $e(e){let n;const o=new ce({props:{instagramId:e[7]}});return{c(){H(o.$$.fragment)},m(t,e){K(o,t,e),n=!0},p:t,i(t){n||(A(o.$$.fragment,t),n=!0)},o(t){O(o.$$.fragment,t),n=!1},d(t){R(o,t)}}}function he(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function ve(e){let n;const o=new vt({});return{c(){H(o.$$.fragment)},m(t,e){K(o,t,e),n=!0},p:t,i(t){n||(A(o.$$.fragment,t),n=!0)},o(t){O(o.$$.fragment,t),n=!1},d(t){R(o,t)}}}function we(t){let e,n,o,r,c,l,p,f,$={ctx:t,current:null,token:null,pending:ve,then:pe,catch:de,value:5,error:6,blocks:[,,,]};U(c=t[0],$);const v=new ue({});return{c(){e=d("script"),o=m(),r=d("div"),$.block.c(),l=m(),H(v.$$.fragment),e.async=!0,e.defer=!0,h(e,"crossorigin","anonymous"),e.src!==(n="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v5.0&appId=557311021489280")&&h(e,"src","https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v5.0&appId=557311021489280"),h(r,"class","app svelte-3dx771"),f=[g(e,"load",t[3]),g(e,"error",t[4])]},m(t,n){i(document.head,e),a(t,o,n),a(t,r,n),$.block.m(r,$.anchor=null),$.mount=()=>r,$.anchor=l,i(r,l),K(v,r,null),p=!0},p(e,[n]){if(t=e,$.ctx=t,1&n&&c!==(c=t[0])&&U(c,$));else{const e=t.slice();e[5]=$.resolved,$.block.p(e,n)}},i(t){p||(A($.block),A(v.$$.fragment,t),p=!0)},o(t){for(let t=0;t<3;t+=1){O($.blocks[t])}O(v.$$.fragment,t),p=!1},d(t){u(e),t&&u(o),t&&u(r),$.block.d(),$.token=null,$=null,R(v),s(f)}}}function be(t,e,n){let o=new Promise(()=>{}),s=!1;return[o,s,async()=>(await tt("/me/accounts?fields=name,instagram_business_account")).find(t=>t.instagram_business_account).instagram_business_account.id,()=>{window.FB.Event.subscribe("auth.statusChange",async()=>{n(1,s=!!window.FB.getAccessToken())}),window.FB.getLoginStatus(()=>n(0,o=Promise.resolve()))},()=>n(0,o=Promise.reject())]}return new class extends Q{constructor(t){super(),X(this,t,be,we,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
